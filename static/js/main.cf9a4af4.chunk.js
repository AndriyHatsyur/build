(this["webpackJsonpprice-calculation-client"]=this["webpackJsonpprice-calculation-client"]||[]).push([[0],{307:function(e,t){},415:function(e,t,a){},493:function(e,t){},494:function(e,t){},523:function(e,t){},525:function(e,t){},535:function(e,t){},537:function(e,t){},564:function(e,t){},565:function(e,t){},570:function(e,t){},572:function(e,t){},579:function(e,t){},598:function(e,t){},620:function(e,t,a){"use strict";a.r(t);var n,r,c,i,o,l,u,d,s,j,b,O,p,h,x,f,m,y,g,v,I,P,w,k,C,_,S,F,$,M,B,D,V,A,q,L,K,N,E,T,Y,z,R,Q,U,J,G,H,W,X,Z,ee,te,ae,ne,re,ce,ie,oe,le=a(0),ue=a.n(le),de=a(62),se=a.n(de),je=a(76),be=a(27),Oe=a(53),pe=a.n(Oe),he=(a(414),a(12)),xe=a(237),fe=(a(415),a(13)),me=a(666),ye=a(1),ge=ue.a.createContext({}),ve=function(e){var t=e.children,a=function(){var e=Object(le.useState)(!1),t=Object(fe.a)(e,2),a=t[0],n=t[1],r=Object(le.useState)({}),c=Object(fe.a)(r,2),i=c[0],o=c[1],l=Object(le.useState)(null),u=Object(fe.a)(l,2),d=u[0],s=u[1];return{isModalVisible:a,showModal:function(e){var t=e.content,a=e.title,r=e.width;n(!0),s(t),o({title:a,width:r})},handleCancel:function(){n(!1),s(null),o({})},modalConfig:i,modalContent:d}}(),n=a.isModalVisible,r=a.showModal,c=a.handleCancel,i=a.modalConfig,o=a.modalContent;return Object(ye.jsxs)(ge.Provider,{value:{isModalVisible:n,showModal:r,handleCancel:c,modalConfig:i},children:[t,n&&Object(ye.jsx)(me.a,{title:i.title,visible:n,onCancel:c,footer:null,width:i.width,children:o})]})},Ie=function(){return Object(le.useContext)(ge)},Pe=a(22),we=a(50),ke=we.a.div(n||(n=Object(he.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Ce=function(){return Object(ye.jsx)("div",{children:Object(ye.jsx)(Pe.a,{})})},_e=a(660),Se=a(671),Fe=a(626),$e=a(144),Me=ue.a.createContext({}),Be=function(e){var t=e.children,a=function(){var e=Object(le.useState)(null),t=Object(fe.a)(e,2),a=t[0],n=t[1];return{user:a,userLogin:function(e){n(e)},userLogout:function(){n(null),localStorage.removeItem("token"),window.location.reload()}}}(),n=a.user,r=a.userLogin,c=a.userLogout;return Object(ye.jsx)(Me.Provider,{value:{user:n,userLogin:r,userLogout:c},children:t})},De=function(){return Object(le.useContext)(Me)},Ve=we.a.div(r||(r=Object(he.a)(["\n  cursor: pointer;\n  float: right;\n  &:hover {\n    color: #fff;\n  }\n"]))),Ae=we.a.span(c||(c=Object(he.a)(["\n  margin: 0 20px;\n"]))),qe=function(){var e=Object(Pe.g)(),t=Object(le.useState)(e.pathname),a=Object(fe.a)(t,2),n=a[0],r=a[1],c=De(),i=c.user,o=c.userLogout,l=Object(Pe.h)();return Object(ye.jsxs)($e.a,{onClick:function(e){r(e.key),l(e.key)},selectedKeys:[n],mode:"horizontal",theme:"dark",children:[Object(ye.jsx)($e.a.Item,{children:"\u041f\u0440\u0430\u0439\u0441"},fc.home),Object(ye.jsx)($e.a.Item,{children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457"},fc.category),Object(ye.jsx)($e.a.Item,{children:"\u0414\u0440\u043e\u043f\u0448\u0438\u043f\u043f\u0435\u0440\u0438"},fc.dropBuyer),Object(ye.jsx)($e.a.Item,{children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"},fc.batchOrders),Object(ye.jsx)($e.a.Item,{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"},fc.statistic),Object(ye.jsx)($e.a.Item,{children:"\u041c\u043e\u0457 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"},fc.ownOrders),Object(ye.jsxs)($e.a.Item,{style:{marginLeft:"auto"},onClick:o,children:[Object(ye.jsxs)(Ae,{children:["\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447: ",null===i||void 0===i?void 0:i.username]}),Object(ye.jsx)(Ve,{children:"\u0412\u0438\u0439\u0442\u0438"})]},fc.login)]})},Le=Object(_e.a)(i||(i=Object(he.a)(["\n  query ME_QUERY {\n    me {\n      username\n      role\n    }\n  }\n"]))),Ke=a(69),Ne=a(658),Ee=a(667),Te=a(641),Ye=a(630),ze=a(384),Re=a(627),Qe=a(631),Ue=a(649),Je=a(383),Ge=a(635),He=a(103),We=a(399),Xe=a(402),Ze=a(382),et=a(650),tt=a(20),at=a.n(tt),nt=a(34),rt=a(680),ct=a(633),it=a(385),ot=a(638),lt=a(675),ut=a(644),dt=a(21),st=a(669),jt=a(628),bt=a(629),Ot=a(673),pt=a(632),ht=a(634),xt=a(229),ft=a(636),mt=a(637),yt=a(676),gt=a(403),vt=a(639),It=a(668),Pt=a(640),wt="\u041f\u0440\u043e\u0434\u0443\u043a\u0442",kt="\u041d\u0430\u0431\u0456\u0440",Ct="-",_t=localStorage.getItem("setting")||10,St=function(e){return Math.round(100*(e+Number.EPSILON))/100},Ft=Re.a((function(e,t){return Ee.a((a=2,st.a(1,"toFixed")(a)),jt.a(Je.a(100,e)),bt.a(Ye.a,100))(t);var a})),$t=Qe.a(Ot.a,[Ee.a(pt.a("_id"),Fe.a(void 0,"subcategoryId")),Xe.a([],["category","subcategories"])]),Mt={_id:ze.a("_id"),nomenclature:Fe.a(Ct,"nomenclature"),article:Fe.a(Ct,"article"),categoryName:Xe.a(Ct,["category","name"]),subcategoryName:Ee.a(Fe.a(Ct,"name"),$t)},Bt=Ee.a(He.a(Ee.a(Qe.a(ct.a,[it.a,lt.a({wholesalePrice:Ee.a(Math.round,Ft(-5),Fe.a(0,"sellingPrice"))})]),lt.a(Object(dt.a)(Object(dt.a)({},Mt),{},{count:Fe.a(Ct,"count"),price:Fe.a(Ct,"price"),dropPrice:Ee.a(parseFloat,Ft(_t),Fe.a(0,"price")),sellingPrice:ze.a("sellingPrice"),type:ht.a(wt),category:Fe.a({},"category"),markup:Fe.a(null,"markup")})))),Fe.a([],"products")),Dt=Fe.a([],"products"),Vt=Ee.a(He.a(lt.a(Object(dt.a)(Object(dt.a)({},Mt),{},{price:Ee.a(St,Ge.a,xt.a("price"),Dt),count:Ee.a(ft.a,mt.a((function(e,t){return e-t})),xt.a("count"),Dt),dropPrice:Ee.a(St,parseFloat,Ge.a,xt.a("dropPrice"),Dt),sellingPrice:Ee.a(Math.round,Ge.a,xt.a("sellingPrice"),Dt),wholesalePrice:Ee.a(Math.round,Ge.a,xt.a("wholesalePrice"),Dt),type:ht.a(kt)}))),He.a(Qe.a(ct.a,[it.a,Ee.a(ot.a("products"),Bt)])),Fe.a([],"productSets")),At=Ee.a(lt.a({categories:Ee.a(yt.a,xt.a("name")),subCategories:Ee.a(gt.a(vt.a),yt.a,xt.a("name"),It.a,xt.a("subcategories"))}),Fe.a([],"categories")),qt=Ee.a(Pt.a({text:Ct,value:Ct}),He.a(lt.a({text:it.a,value:it.a}))),Lt=a(661),Kt=a(659),Nt=a(664),Et=a(189),Tt=a(674),Yt=a(663),zt=a(386),Rt={required:!0,message:"\u0426\u0435 \u043f\u043e\u043b\u0435 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435"},Qt=function(){return Object(ye.jsx)(Lt.a.Item,{children:Object(ye.jsx)(Ke.a,{type:"primary",htmlType:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})},Ut=function(){return Object(ye.jsx)(Lt.a.Item,{label:"\u041d\u0430\u0446\u0456\u043d\u043a\u0430",name:"markup",children:Object(ye.jsx)(Yt.a,{min:0})})},Jt=function(){return Object(ye.jsx)(Lt.a.Item,{label:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",name:"article",rules:[Rt],children:Object(ye.jsx)(Nt.a,{})})},Gt=a(42),Ht=a(642),Wt=a(643),Xt=Object(_e.a)(o||(o=Object(he.a)(["\n  query productsSearch($search: String!) {\n    productsSearch(search: $search) {\n      _id\n      nomenclature\n      article\n      price\n      markup\n      sellingPrice\n      category {\n        _id\n        name\n        markup\n        subcategories {\n          _id\n          name\n          markup\n        }\n      }\n    }\n    productSetSearch(search: $search) {\n      _id\n      nomenclature\n      article\n      products {\n        _id\n        nomenclature\n        article\n        price\n        markup\n        sellingPrice\n        category {\n          _id\n          name\n          markup\n          subcategories {\n            _id\n            name\n            markup\n          }\n        }\n      }\n      category {\n        _id\n        name\n        markup\n        subcategories {\n          _id\n          name\n          markup\n        }\n      }\n      subcategoryId\n    }\n  }\n"]))),Zt=Re.a((function(e,t){return We.a(Ee.a(Te.a(Ye.a,e),ze.a("_id")),t)})),ea=Ee.a(lt.a({products:it.a,totalPrice:Ee.a(St,Ge.a,He.a(Fe.a(0,"totalPrice"))),totalDropPrice:Ee.a(St,Ge.a,He.a(Fe.a(0,"totalDropPrice"))),totalSellPrice:Ee.a(St,Ge.a,He.a(Fe.a(0,"totalSellingPrice")))}),He.a(Qe.a(ct.a,[it.a,lt.a({totalPrice:Qe.a(jt.a,[ze.a("price"),ze.a("count")]),totalDropPrice:Qe.a(jt.a,[ze.a("dropPrice"),ze.a("count")]),totalSellingPrice:Qe.a(jt.a,[ze.a("sellingPrice"),ze.a("count")])})]))),ta=Ee.a(Bt,ot.a("products"),He.a(Qe.a(ct.a,[it.a,lt.a({count:Fe.a(1,"count")})])),Fe.a([],"productsSearch")),aa=Ee.a(He.a(Qe.a(ct.a,[it.a,lt.a({count:Ht.a(pt.a("count","-"),ht.a(1),ze.a("count"))})])),Vt,ot.a("productSets"),Fe.a([],"productSetSearch")),na=function(e){var t=e.form,a=e.initialProducts,n=void 0===a?[]:a,r="ADMIN"===De().user.role,c=Object(le.useState)(n),i=Object(fe.a)(c,2),o=i[0],l=i[1],u=Object(le.useState)(""),d=Object(fe.a)(u,2),s=d[0],j=d[1],b=Object(Se.a)(Xt,{variables:{search:s},skip:s.length<3}).data,O=function(){var e=t.getFieldValue("products"),a=ea(e);t.setFieldsValue(a),l(a.products)},p=yt.a([].concat(Object(Gt.a)(Fe.a([],"productsSearch",b)),Object(Gt.a)(Fe.a([],"productSetSearch",b)),Object(Gt.a)(n)));return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Lt.a.Item,{label:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438(\u0410\u0440\u0442\u0438\u043a\u0443\u043b)",name:"productIds",children:Object(ye.jsx)(Et.a,{onChange:function(e){var a=[];if(e.length>o.length){var n=ta(b),r=aa(b),c=Ot.a(pt.a("_id",Wt.a(e)),[].concat(Object(Gt.a)(n),Object(Gt.a)(r)));a=[].concat(Object(Gt.a)(o),[c])}else a=Zt(e,o);var i=ea(a);t.setFieldsValue(i),l(i.products)},onSearch:function(e){j(e)},mode:"multiple",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:p.map((function(e){return Object(ye.jsx)(Et.a.Option,{value:e._id,children:e.article},e._id)}))})}),Object(ye.jsx)(Lt.a.List,{name:"products",children:function(e,t){t.add,t.remove;return Object(ye.jsx)(ye.Fragment,{children:e.map((function(e){return Object(ye.jsxs)(Tt.b,{align:"baseline",children:[Object(ye.jsx)(Lt.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.area!==t.area||e.sights!==t.sights},children:function(){return Object(ye.jsx)(Lt.a.Item,Object(dt.a)(Object(dt.a)({},e),{},{label:"\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430",name:[e.name,"nomenclature"],fieldKey:[e.fieldKey,"nomenclature"],rules:[Rt],children:Object(ye.jsx)(Nt.a,{disabled:!0})}))}}),Object(ye.jsx)(Lt.a.Item,Object(dt.a)(Object(dt.a)({},e),{},{label:"\u0426\u0456\u043d\u0430 \u0434\u0440\u043e\u043f",name:[e.name,"dropPrice"],fieldKey:[e.fieldKey,"dropPrice"],rules:[Rt],onChange:O,children:Object(ye.jsx)(Yt.a,{disabled:!r})})),Object(ye.jsx)(Lt.a.Item,Object(dt.a)(Object(dt.a)({},e),{},{label:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c",name:[e.name,"count"],fieldKey:[e.fieldKey,"count"],rules:[Rt],onChange:O,children:Object(ye.jsx)(Yt.a,{})}))]},e.key)}))})}}),Object(ye.jsx)("br",{})]})},ra={PAID_BEFORE:"\u041f\u0440\u0435\u0434\u043e\u043f\u043b\u0430\u0442\u0430",PAID_AFTER:"\u041d\u0430\u043b\u043e\u0436\u043a\u0430",PAID:"\u041d\u0430\u043b\u043e\u0436\u043a\u0430 \u041e\u0442\u0440\u0438\u043c\u0430\u043d\u0430"},ca=function(e){var t=e.onFinish,a=e.initialValues,n=void 0===a?{isActive:!0}:a,r=e.initialProducts,c=void 0===r?[]:r,i=Lt.a.useForm(),o=Object(fe.a)(i,1)[0],l="ADMIN"===De().user.role;return Object(ye.jsxs)(Lt.a,{form:o,name:"orderForm",onFinish:t,layout:"vertical",initialValues:n,children:[Object(ye.jsx)(Lt.a.Item,{name:"date",label:"\u0414\u0430\u0442\u0430",rules:[Rt],children:Object(ye.jsx)(Kt.a,{})}),Object(ye.jsx)(Lt.a.Item,{label:"\u0422\u0422\u041d",name:"ttn",children:Object(ye.jsx)(Nt.a,{})}),Object(ye.jsx)(Lt.a.Item,{label:"\u0421\u0442\u0430\u0442\u0443\u0441",name:"status",initialValue:ra.PAID_BEFORE,children:Object(ye.jsx)(Et.a,{children:zt.a(ra).map((function(e){return Object(ye.jsx)(Et.a.Option,{value:e,children:e},e)}))})}),Object(ye.jsx)(Lt.a.Item,{label:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",name:"buyerInfo",children:Object(ye.jsx)(Nt.a,{})}),Object(ye.jsx)(na,{form:o,initialProducts:c}),Object(ye.jsxs)(Tt.b,{children:[Object(ye.jsx)(Lt.a.Item,{label:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",name:"payed",children:Object(ye.jsx)(Yt.a,{})}),Object(ye.jsx)(Lt.a.Item,{label:"\u0421\u0443\u043c\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0430",name:"totalDropPrice",rules:[Rt],initialValue:0,children:Object(ye.jsx)(Yt.a,{min:0,disabled:!l})})]}),Object(ye.jsx)("br",{}),Object(ye.jsxs)(Tt.b,{children:[Object(ye.jsx)(Lt.a.Item,{name:"totalPrice",label:"\u0421\u0443\u043c\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0430 \u043c\u043e\u044f",rules:[Rt],initialValue:0,children:Object(ye.jsx)(Yt.a,{min:0,disabled:!l})}),Object(ye.jsx)(Lt.a.Item,{name:"totalSellPrice",label:"\u0421\u0443\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436",rules:[Rt],initialValue:0,children:Object(ye.jsx)(Yt.a,{min:0,disabled:!l})})]}),Object(ye.jsx)(Qt,{})]})},ia=Object(_e.a)(l||(l=Object(he.a)(["\n  mutation addOrderToBatch($batchOrderId: ID!, $order: OrderInput!) {\n    addOrderToBatch(batchOrderId: $batchOrderId, order: $order) {\n      _id\n    }\n  }\n"]))),oa=Ee.a(Qe.a(ct.a,[it.a,Ee.a(ot.a("products"),He.a(lt.a({_id:ze.a("_id"),article:ze.a("article"),count:ze.a("count"),price:Ee.a(St,ze.a("price")),dropPrice:Ee.a(St,ze.a("dropPrice")),sellingPrice:Ee.a(St,ze.a("sellingPrice")),nomenclature:ze.a("nomenclature")})),Fe.a([],"products"))]),ut.a("productIds")),la=function(e){var t=e.closeModal,a=e.refetch,n=e.batchOrderId,r=Object(rt.a)(ia),c=Object(fe.a)(r,1)[0],i=function(){var e=Object(nt.a)(at.a.mark((function e(r){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({variables:{batchOrderId:n,order:oa(r)}});case 3:t(),a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(ca,{onFinish:i})},ua=Object(_e.a)(u||(u=Object(he.a)(["\n  mutation updateOrder($batchOrderId: ID!, $orderId: ID!, $order: OrderInput!) {\n    updateOrder(batchOrderId: $batchOrderId, orderId: $orderId, order: $order) {\n      _id\n    }\n  }\n"]))),da=Ee.a(He.a(ze.a("_id")),Fe.a([],"products")),sa=function(e){var t=e.closeModal,a=e.refetch,n=e.batchOrderId,r=e.order;console.log(r);var c=Object(rt.a)(ua),i=Object(fe.a)(c,1)[0],o=da(r),l=Object(dt.a)(Object(dt.a)({},r),{},{productIds:o,date:pe()(r.date)}),u=Fe.a([],"products",r),d=function(){var e=Object(nt.a)(at.a.mark((function e(c){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i({variables:{batchOrderId:n,orderId:r.id,order:Object(dt.a)({},oa(c))}}),t(),a()}catch(o){alert(o)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(ca,{onFinish:d,initialValues:l,initialProducts:u})},ja=a(682),ba=a(681),Oa=a(683),pa=a(684),ha=we.a.div(d||(d=Object(he.a)(["\n  display: flex;\n  padding: 10px 15px;\n  gap: 12px;\n"]))),xa=we.a.div(s||(s=Object(he.a)(["\n  display: flex;\n  width: 58%;\n  justify-content: flex-end;\n  @media (max-width: 1600px) {\n    width: 37%;\n  }\n"]))),fa=function(e){var t=e.onClick;return Object(ye.jsx)(ja.a,{onClick:t,style:{color:"#ac372f"}})},ma=function(e){var t=e.onClick;return Object(ye.jsx)(ba.a,{onClick:t,style:{color:"#2a66c6"}})},ya=function(e){var t=e.onClick;return Object(ye.jsx)(Oa.a,{onClick:t,style:{color:"green"}})},ga=function(e){var t=e.onClick;return Object(ye.jsx)(xa,{children:Object(ye.jsx)(pa.a,{onClick:t,style:{cursor:"pointer"}})})},va=a(191),Ia=me.a.confirm,Pa=function(e,t,a){return function(){return Ia({title:"\u0412\u0438 \u0432\u043f\u0435\u0432\u043d\u0435\u043d\u0456 \u0449\u043e \u0445\u043e\u0447\u0438\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 ".concat(e),icon:Object(ye.jsx)(va.a,{}),okText:"\u0422\u0430\u043a",okType:"danger",cancelText:"\u041d\u0456",onOk:function(){var e=Object(nt.a)(at.a.mark((function e(){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return e.next=5,a();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()})}},wa=Object(_e.a)(j||(j=Object(he.a)(["\n  mutation removeOrder($batchOrderId: ID!, $orderId: ID!) {\n    removeOrder(batchOrderId: $batchOrderId, orderId: $orderId) {\n      _id\n    }\n  }\n"]))),ka=function(e){var t=e.batchOrderId,a=e.orderId,n=e.refetch,r=Object(rt.a)(wa,{variables:{batchOrderId:t,orderId:a}}),c=Object(fe.a)(r,1)[0],i=Pa("\u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",c,n);return Object(ye.jsx)(fa,{onClick:i})},Ca=function(e){var t=e.type,a=e.products,n=[{title:"\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430",dataIndex:"nomenclature"},{title:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",dataIndex:"article"},{title:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c",dataIndex:"count"}],r=[];return"own"===t?r=[].concat(n,[{title:"\u0417\u0430\u043a\u0443\u043f\u043a\u0430 \u043c\u043e\u044f",dataIndex:"price"},{title:"\u041f\u0440\u043e\u0434\u0430\u0436",dataIndex:"sellingPrice"}]):"public-drop"===t?r=[].concat(n,[{title:"\u0417\u0430\u043a\u0443\u043f\u043a\u0430",dataIndex:"dropPrice"}]):"drop"===t&&(r=[].concat(n,[{title:"\u0417\u0430\u043a\u0443\u043f\u043a\u0430 \u043c\u043e\u044f",dataIndex:"price"},{title:"\u0417\u0430\u043a\u0443\u043f\u043a\u0430",dataIndex:"dropPrice"},{title:"\u041f\u0440\u043e\u0434\u0430\u0436",dataIndex:"sellingPrice"}])),Object(ye.jsx)(Ne.a,{dataSource:a,columns:r,pagination:!1,rowKey:"nomenclature"})},_a=Ee.a(Te.a(Ye.a,[ra.PAID,ra.PAID_BEFORE]),ze.a("status")),Sa=Re.a((function(e,t){return Ee.a(St,Qe.a(Ue.a,[Ee.a(Je.a(e),Ge.a,He.a(Fe.a(0,"payed"))),Ee.a(Ge.a,He.a(Fe.a(0,"totalDropPrice")))]),We.a(_a))(t)})),Fa=Ee.a(St,Qe.a(Ue.a,[Ee.a(Ge.a,He.a(Fe.a(0,"totalDropPrice"))),Ee.a(Ge.a,He.a(Fe.a(0,"totalPrice")))]),We.a(_a)),$a=we.a.div(b||(b=Object(he.a)(["\n  display: flex;\n  align-items: center;\n  gap: 20px;\n"]))),Ma=Object(_e.a)(O||(O=Object(he.a)(["\n  query batchOrderQuery($id: ID!) {\n    batchOrder(id: $id) {\n      _id\n      name\n      dropBuyer {\n        _id\n        name\n      }\n      isActive\n      movedTotal\n      orders {\n        id\n        date\n        totalPrice\n        totalSellPrice\n        totalDropPrice\n        payed\n        ttn\n        buyerInfo\n        status\n        products {\n          _id\n          article\n          count\n          price\n          dropPrice\n          sellingPrice\n          nomenclature\n        }\n      }\n    }\n  }\n"]))),Ba=function(){var e=Object(Pe.i)().batchOrderId,t=Ie(),a=t.showModal,n=t.handleCancel,r=Object(Se.a)(Ma,{variables:{id:e},skip:!e,fetchPolicy:"network-only"}),c=r.data,i=r.loading,o=r.refetch,l=Xe.a("",["batchOrder","name"],c),u=Xe.a("",["batchOrder","dropBuyer","name"],c),d=Xe.a("",["batchOrder","movedTotal"],c),s=Ee.a(Ze.a,et.a(ze.a("date")),Xe.a([],["batchOrder","orders"]))(c),j=Sa(d)(s),b=Fa(s),O=[{title:"\u0414\u0430\u0442\u0430",dataIndex:"date",render:function(e){return pe()(e).format("YYYY-MM-DD")}},{title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",dataIndex:"buyerInfo"},{title:"\u0422\u0422\u041d",dataIndex:"ttn"},{title:"\u0421\u0443\u043c\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0430 \u043c\u043e\u044f",dataIndex:"totalPrice"},{title:"\u0421\u0443\u043c\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0430",dataIndex:"totalDropPrice"},{title:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",dataIndex:"payed"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status"},{dataIndex:"_id",render:function(t,r){return Object(ye.jsxs)(ha,{children:[Object(ye.jsx)(ya,{onClick:function(){return e=Fe.a([],"products",r),a({title:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438",width:1e3,content:function(){return Object(ye.jsx)(Ca,{products:e,type:"drop"})}});var e}}),Object(ye.jsx)(ma,{onClick:function(){return function(t){return a({title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",content:function(){return Object(ye.jsx)(sa,{closeModal:n,refetch:o,batchOrderId:e,order:t})}})}(r)}}),Object(ye.jsx)(ka,{batchOrderId:e,orderId:r.id,refetch:o})]})}}];return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)($a,{children:[Object(ye.jsx)(Ke.a,{style:{margin:"10px"},type:"primary",onClick:function(){return a({title:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0434\u043e ".concat(l),content:function(){return Object(ye.jsx)(la,{closeModal:n,refetch:o,batchOrderId:e})}})},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(ye.jsxs)("p",{children:["\u041d\u0430\u0437\u0432\u0430: ",l]}),Object(ye.jsxs)("p",{children:["\u0414\u0440\u043e\u043f\u0448\u0438\u043f\u043f\u0435\u0440: ",u]}),Object(ye.jsxs)("p",{children:["\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0435\u043d\u043e: ",d," \u0433\u0440\u043d"]}),Object(ye.jsx)("h3",{children:Object(ye.jsxs)("b",{children:["\u0411\u0430\u043b\u0430\u043d\u0441: ",j," \u0433\u0440\u043d"]})}),Object(ye.jsxs)("p",{children:["\u0414\u043e\u0445\u0456\u0434: ",b," \u0433\u0440\u043d"]})]}),Object(ye.jsx)(Ne.a,{columns:O,dataSource:s,loading:i,rowKey:"id",pagination:!1,size:"small",scroll:{y:800}})]})},Da=a(190),Va=Object(_e.a)(p||(p=Object(he.a)(["\n  mutation deleteDropBuyer($id: ID!) {\n    deletedropBuyer(id: $id)\n  }\n"]))),Aa=function(e){var t=e.id,a=e.name,n=e.refetch,r=Object(rt.a)(Va,{variables:{id:t}}),c=Object(fe.a)(r,1)[0],i=Pa(a,c,n);return Object(ye.jsx)(fa,{onClick:i})},qa=function(e){var t=e.onFinish,a=e.initialValues,n=void 0===a?{isActive:!0}:a;return Object(ye.jsxs)(Lt.a,{name:"dropBuyerForm",onFinish:t,layout:"vertical",initialValues:n,children:[Object(ye.jsx)(Lt.a.Item,{label:"\u041d\u0430\u0437\u0432\u0430",name:"name",rules:[Rt],children:Object(ye.jsx)(Nt.a,{})}),Object(ye.jsx)(Lt.a.Item,{name:"isActive",valuePropName:"checked",children:Object(ye.jsx)(Da.a,{children:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439"})}),Object(ye.jsx)(Qt,{})]})},La=Object(_e.a)(h||(h=Object(he.a)(["\n  mutation createdropBuyer($input: DropBuyerInput!) {\n    createdropBuyer(input: $input) {\n      _id\n    }\n  }\n"]))),Ka=function(e){var t=e.closeModal,a=e.refetch,n=Object(rt.a)(La),r=Object(fe.a)(n,1)[0],c=function(){var e=Object(nt.a)(at.a.mark((function e(n){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r({variables:{input:n}});case 3:t(),a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(qa,{onFinish:c})},Na=Object(_e.a)(x||(x=Object(he.a)(["\n  mutation updatedropBuyer($id: ID!, $update: DropBuyerInput!) {\n    updatedropBuyer(id: $id, update: $update) {\n      _id\n    }\n  }\n"]))),Ea=Object(_e.a)(f||(f=Object(he.a)(["\n  query dropBuyer($id: ID!) {\n    dropBuyer(id: $id) {\n      _id\n      name\n      isActive\n    }\n  }\n"]))),Ta=function(e){var t=e.id,a=e.closeModal,n=e.refetch,r=Object(Se.a)(Ea,{variables:{id:t},fetchPolicy:"network-only"}),c=r.data,i=r.loading,o=Fe.a({},"dropBuyer",c),l=Object(rt.a)(Na),u=Object(fe.a)(l,1)[0],d=function(){var e=Object(nt.a)(at.a.mark((function e(r){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({variables:{id:t,update:r}});case 3:a(),n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return i?null:(console.log({initialValues:o,id:t,data:c}),Object(ye.jsx)(qa,{onFinish:d,initialValues:o}))},Ya=Object(we.a)(Ke.a)(m||(m=Object(he.a)(["\n  margin: 10px;\n"]))),za=Object(_e.a)(y||(y=Object(he.a)(["\n  query {\n    dropBuyers {\n      _id\n      name\n      isActive\n    }\n  }\n"]))),Ra=function(){var e=Object(Se.a)(za,{fetchPolicy:"network-only"}),t=e.data,a=e.loading,n=e.refetch,r=Ie(),c=r.showModal,i=r.handleCancel,o=[{title:"\u041d\u0430\u0437\u0432\u0430",dataIndex:"name",render:function(e,t){var a=Object(Pe.e)(fc.batchOrdersBuyer,{dropBuyerId:t._id});return Object(ye.jsx)(je.b,{to:a,children:e})}},{title:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439",dataIndex:"isActive",render:function(e){return e?"\u0422\u0430\u043a":"\u041d\u0456"}},{dataIndex:"_id",render:function(e,t){return Object(ye.jsxs)(ha,{children:[Object(ye.jsx)(ma,{onClick:function(){return function(e,t){return c({title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438  ".concat(t),content:function(){return Object(ye.jsx)(Ta,{closeModal:i,refetch:n,id:e})}})}(e,t.name)}}),Object(ye.jsx)(Aa,{refetch:n,id:e,name:t.name})]})}}];return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Ya,{type:"primary",onClick:function(){return c({title:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u043e\u0433\u043e \u0434\u0440\u043e\u043f\u0448\u0438\u043f\u043f\u0435\u0440\u0430",content:function(){return Object(ye.jsx)(Ka,{closeModal:i,refetch:n})}})},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0434\u0440\u043e\u043f\u0448\u0438\u043f\u043f\u0435\u0440\u0430"}),Object(ye.jsx)(Ne.a,{columns:o,dataSource:Fe.a([],"dropBuyers",t),loading:a,rowKey:"_id",pagination:!1,size:"small"})]})},Qa=Et.a.Option,Ua=function(){var e=Object(Se.a)(za,{fetchPolicy:"network-only"}).data,t=Fe.a([],"dropBuyers",e);return Object(ye.jsx)(Lt.a.Item,{label:"\u0414\u0440\u043e\u043f\u0448\u0438\u043f\u043f\u0435\u0440",name:"dropBuyerId",rules:[Rt],children:Object(ye.jsx)(Et.a,{style:{width:"100%"},children:t.map((function(e){return Object(ye.jsx)(Qa,{value:e._id,children:e.name},e._id)}))})})},Ja=function(e){var t=e.onFinish,a=e.initialValues,n=void 0===a?{isActive:!0}:a;return Object(ye.jsxs)(Lt.a,{name:"batchOrderForm",onFinish:t,layout:"vertical",initialValues:n,children:[Object(ye.jsx)(Lt.a.Item,{label:"\u041d\u0430\u0437\u0432\u0430",name:"name",rules:[Rt],children:Object(ye.jsx)(Nt.a,{})}),Object(ye.jsx)(Ua,{}),Object(ye.jsx)(Lt.a.Item,{name:"isActive",valuePropName:"checked",children:Object(ye.jsx)(Da.a,{children:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439"})}),Object(ye.jsx)(Lt.a.Item,{label:"\u041f\u043e\u0447\u0430\u0442\u043a\u043e\u0432\u0438\u0439 \u0431\u0430\u043b\u0430\u043d\u0441",name:"movedTotal",rules:[Rt],children:Object(ye.jsx)(Yt.a,{})}),Object(ye.jsx)(Qt,{})]})},Ga=Object(_e.a)(g||(g=Object(he.a)(["\n  mutation createBatchOrders($input: BatchOrdersInput!) {\n    createBatchOrders(input: $input) {\n      _id\n    }\n  }\n"]))),Ha=function(e){var t=e.closeModal,a=e.refetch,n=Object(rt.a)(Ga),r=Object(fe.a)(n,1)[0],c=function(){var e=Object(nt.a)(at.a.mark((function e(n){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r({variables:{input:n}});case 3:t(),a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(Ja,{onFinish:c})},Wa=Object(_e.a)(v||(v=Object(he.a)(["\n  mutation updateBatchOrders($id: ID!, $update: BatchOrdersInput!) {\n    updateBatchOrders(id: $id, update: $update) {\n      _id\n    }\n  }\n"]))),Xa=lt.a({name:ze.a("name"),dropBuyerId:xe.a(["dropBuyer","_id"]),isActive:ze.a("isActive"),movedTotal:ze.a("movedTotal")}),Za=function(e){var t=e.batchOrder,a=e.closeModal,n=e.refetch,r=Object(rt.a)(Wa),c=Object(fe.a)(r,1)[0];console.log(t);var i=Xa(t),o=function(){var e=Object(nt.a)(at.a.mark((function e(r){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({variables:{id:t._id,update:r}});case 3:a(),n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(Ja,{onFinish:o,initialValues:i})},en=Object(_e.a)(I||(I=Object(he.a)(["\n  mutation removeBatchOrders($id: ID!) {\n    removeBatchOrders(id: $id)\n  }\n"]))),tn=function(e){var t=e.id,a=e.batchName,n=e.refetch,r=Object(rt.a)(en,{variables:{id:t}}),c=Object(fe.a)(r,1)[0],i=Pa(a,c,n);return Object(ye.jsx)(fa,{onClick:i})},an=Et.a.Option,nn=Object(_e.a)(P||(P=Object(he.a)(["\n  query batchOrdersQuery($query: BatchOrdersQuery!) {\n    batchOrders(query: $query) {\n      _id\n      name\n      dropBuyer {\n        _id\n        name\n      }\n      isActive\n      movedTotal\n    }\n  }\n"]))),rn=function(e){var t=e.query,a=Object(le.useState)(t),n=Object(fe.a)(a,2),r=n[0],c=n[1],i=Ie(),o=i.showModal,l=i.handleCancel,u=Object(Se.a)(nn,{variables:{query:r},skip:!r,fetchPolicy:"network-only"}),d=u.data,s=u.loading,j=u.refetch,b=[{title:"\u041d\u0430\u0437\u0432\u0430",dataIndex:"name",render:function(e,t){var a=Object(Pe.e)(fc.batchOrder,{batchOrderId:t._id});return Object(ye.jsx)(je.b,{to:a,children:e})}},{title:"\u0414\u0440\u043e\u043f\u0448\u0438\u043f\u043f\u0435\u0440",dataIndex:"dropBuyer",render:function(e){return e.name}},{title:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439",dataIndex:"isActive",render:function(e){return e?"\u0422\u0430\u043a":"\u041d\u0456"}},{dataIndex:"_id",render:function(e,t){return Object(ye.jsxs)(ha,{children:[Object(ye.jsx)(ma,{onClick:function(){return function(e){return o({title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438  ".concat(e.name),content:function(){return Object(ye.jsx)(Za,{closeModal:l,refetch:j,batchOrder:e})}})}(t)}}),Object(ye.jsx)(tn,{refetch:j,id:e,batchName:t.name})]})}}];return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(Et.a,{defaultValue:!0,style:{width:120,margin:"10px"},onChange:function(e){c(Object(dt.a)(Object(dt.a)({},r),{},{isActive:e}))},children:[Object(ye.jsx)(an,{value:!0,children:"\u0410\u043a\u0442\u0438\u0432\u043d\u0456"}),Object(ye.jsx)(an,{value:!1,children:"\u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u043d\u0456"})]}),Object(ye.jsx)(Ke.a,{style:{margin:"10px"},type:"primary",onClick:function(){return o({title:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0443 \u0433\u0440\u0443\u043f\u0443 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c",content:function(){return Object(ye.jsx)(Ha,{closeModal:l,refetch:j})}})},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0443 \u0433\u0440\u0443\u043f\u0443"}),Object(ye.jsx)(Ne.a,{columns:b,dataSource:Ee.a(Ze.a,et.a(ze.a("name")),Fe.a([],"batchOrders"))(d),loading:s,rowKey:"_id",pagination:!1,size:"small"})]})},cn={isActive:!0},on=a(656),ln=a(670),un=a(677),dn=function(e){var t=e.onFinish,a=e.initialValues;return Object(ye.jsxs)(Lt.a,{name:"settingsForm",onFinish:t,layout:"vertical",initialValues:a,children:[Object(ye.jsx)(Lt.a.Item,{label:"\u041d\u0430\u0446\u0456\u043d\u043a\u0430 \u0434\u0440\u043e\u043f\u0448\u0438\u043f\u043f\u0435\u0440\u0430\u043c",name:"dropshippingMarkup",rules:[Rt],children:Object(ye.jsx)(Yt.a,{})}),Object(ye.jsx)(Qt,{})]})},sn=Object(_e.a)(w||(w=Object(he.a)(["\n  mutation updateSettings($update: SettingsInput!) {\n    updateSettings(update: $update) {\n      dropshippingMarkup\n    }\n  }\n"]))),jn=function(e){var t=e.closeModal,a=Object(rt.a)(sn),n=Object(fe.a)(a,1)[0],r={dropshippingMarkup:localStorage.getItem("setting")},c=function(){var e=Object(nt.a)(at.a.mark((function e(a){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n({variables:{update:a}});case 3:localStorage.setItem("setting",a.dropshippingMarkup),t(),window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(dn,{onFinish:c,initialValues:r})},bn=Re.a((function(e,t){return Ee.a(Fe.a(null,"subcategories"),Ot.a(pt.a("_id",e)))(t)})),On=we.a.div(k||(k=Object(he.a)(["\n  display: flex;\n  justify-content: flex-start;\n  gap: 30px;\n"]))),pn=function(e){var t=Object(le.useState)(e.categoryId),a=Object(fe.a)(t,2),n=a[0],r=a[1];return{categoryId:n,onValuesChange:function(e,t){var a=t.categoryId;a&&r(a)}}},hn=function(e){var t=e.categoryId,a=Object(Se.a)(qr,{fetchPolicy:"network-only"}),n=a.data,r=a.loading,c=Fe.a([],"categories",n);if(r)return null;var i=bn(t,c);return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Lt.a.Item,{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",name:"categoryId",rules:[Rt],children:Object(ye.jsx)(Et.a,{showSearch:!0,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:c.map((function(e){var t=e.name,a=e._id;return Object(ye.jsx)(Et.a.Option,{value:a,children:t},a)}))})}),i&&Object(ye.jsx)(Lt.a.Item,{label:"\u041f\u0456\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",name:"subcategoryId",children:Object(ye.jsx)(Et.a,{allowClear:!0,showSearch:!0,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:i.map((function(e){var t=e.name,a=e._id;return Object(ye.jsx)(Et.a.Option,{value:a,children:t},a)}))})})]})},xn=function(e){var t=e.onFinish,a=e.initialValues,n=void 0===a?{}:a,r=pn(n),c=r.categoryId,i=r.onValuesChange;return Object(ye.jsxs)(Lt.a,{onValuesChange:i,name:"productForm",onFinish:t,layout:"vertical",initialValues:n,children:[Object(ye.jsx)(Lt.a.Item,{label:"\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430",name:"nomenclature",rules:[Rt],children:Object(ye.jsx)(Nt.a,{})}),Object(ye.jsx)(Jt,{}),Object(ye.jsxs)(On,{children:[Object(ye.jsx)(Lt.a.Item,{label:"\u0417\u0430\u043b\u0438\u0448\u043e\u043a",name:"count",rules:[Rt],children:Object(ye.jsx)(Yt.a,{min:0})}),Object(ye.jsx)(Lt.a.Item,{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0430",name:"price",rules:[Rt],children:Object(ye.jsx)(Yt.a,{min:0})}),Object(ye.jsx)(Ut,{})]}),Object(ye.jsx)(hn,{categoryId:c}),Object(ye.jsx)(Qt,{})]})},fn=a(651),mn=a(652),yn=Ee.a(vt.a,ze.a("subcategoryId")),gn=fn.a(yn,ut.a("subcategoryId")),vn=Qe.a(ct.a,[it.a,lt.a({categoryId:xe.a(["category","_id"])})]),In=Ee.a(vn,ut.a("__typename"),Fe.a({},"product")),Pn=fn.a(yn,mn.a({subcategoryId:null})),wn=Object(_e.a)(C||(C=Object(he.a)(["\n  mutation createProduct($input: ProductInput!) {\n    createProduct(input: $input) {\n      _id\n    }\n  }\n"]))),kn=function(e){var t=e.closeModal,a=e.refetch,n=Object(rt.a)(wn),r=Object(fe.a)(n,1)[0],c=function(){var e=Object(nt.a)(at.a.mark((function e(n){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r({variables:{input:gn(n)}});case 3:t(),a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(xn,{onFinish:c})},Cn=Object(_e.a)(_||(_=Object(he.a)(["\n  mutation updateProduct($id: ID!, $update: ProductInput!) {\n    updateProduct(id: $id, update: $update) {\n      _id\n    }\n  }\n"]))),_n=Object(_e.a)(S||(S=Object(he.a)(["\n  query product($id: ID!) {\n    product(id: $id) {\n      _id\n      nomenclature\n      article\n      count\n      price\n      subcategoryId\n      markup\n      category {\n        _id\n        name\n        markup\n        subcategories {\n          _id\n          name\n          markup\n        }\n      }\n    }\n  }\n"]))),Sn=function(e){var t=e.id,a=e.closeModal,n=e.refetch,r=Object(rt.a)(Cn),c=Object(fe.a)(r,1)[0],i=Object(Se.a)(_n,{variables:{id:t},fetchPolicy:"network-only"}),o=i.data;if(i.loading)return null;var l=In(o),u=function(){var e=Object(nt.a)(at.a.mark((function e(r){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({variables:{id:t,update:Pn(r)}});case 3:a(),n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(xn,{onFinish:u,initialValues:l})},Fn=function(e){var t=e.products;return Object(ye.jsx)(Ne.a,{dataSource:t,columns:[{title:"\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430",dataIndex:"nomenclature"},{title:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",dataIndex:"article"},{title:"\u0417\u0430\u043b\u0438\u0448\u043e\u043a",dataIndex:"count"},{title:"\u0417\u0430\u043a\u0443\u043f\u043a\u0430",dataIndex:"price"}],pagination:!1,rowKey:"nomenclature"})},$n=Re.a((function(e,t){return Ot.a(pt.a("_id",Wt.a(e)),t)})),Mn=Re.a((function(e,t){return We.a(Ee.a(Te.a(Ye.a,e),ze.a("_id")),t)})),Bn=Object(_e.a)(F||(F=Object(he.a)(["\n  query productsSearch($search: String!) {\n    productsSearch(search: $search) {\n      _id\n      nomenclature\n      article\n      price\n      count\n    }\n  }\n"]))),Dn=function(e){var t=e.initialProducts,a=Object(le.useState)(t),n=Object(fe.a)(a,2),r=n[0],c=n[1],i=Object(le.useState)(""),o=Object(fe.a)(i,2),l=o[0],u=o[1],d=Object(Se.a)(Bn,{variables:{search:l},skip:l.length<3}).data,s=yt.a([].concat(Object(Gt.a)(Fe.a([],"productsSearch",d)),Object(Gt.a)(t)));return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Lt.a.Item,{label:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438",name:"productIds",rules:[Rt],children:Object(ye.jsx)(Et.a,{onChange:function(e){e.length>r.length?c([].concat(Object(Gt.a)(r),[$n(e,s)])):c(Mn(e,r))},onSearch:function(e){u(e)},mode:"multiple",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:s.map((function(e){return Object(ye.jsx)(Et.a.Option,{value:e._id,children:e.nomenclature},e._id)}))})}),Object(ye.jsx)(Fn,{products:r}),Object(ye.jsx)("br",{})]})},Vn=function(e){var t=e.onFinish,a=e.initialValues,n=void 0===a?{}:a,r=e.initialProducts,c=void 0===r?[]:r,i=pn(n),o=i.categoryId,l=i.onValuesChange;return Object(ye.jsxs)(Lt.a,{name:"productForm",onFinish:t,layout:"vertical",initialValues:n,onValuesChange:l,children:[Object(ye.jsx)(Lt.a.Item,{label:"\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430",name:"nomenclature",rules:[Rt],children:Object(ye.jsx)(Nt.a,{})}),Object(ye.jsx)(hn,{categoryId:o}),Object(ye.jsx)(Jt,{}),Object(ye.jsx)(Dn,{initialProducts:c}),Object(ye.jsx)(Qt,{})]})},An=Object(_e.a)($||($=Object(he.a)(["\n  mutation createProductSet($input: ProductSetInput!) {\n    createProductSet(input: $input) {\n      _id\n    }\n  }\n"]))),qn=function(e){var t=e.closeModal,a=e.refetch,n=Object(rt.a)(An),r=Object(fe.a)(n,1)[0],c=function(){var e=Object(nt.a)(at.a.mark((function e(n){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({variables:{input:gn(n)}});case 2:t(),a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(Vn,{onFinish:c})},Ln=Object(_e.a)(M||(M=Object(he.a)(["\n  mutation updateProductSet($id: ID!, $update: ProductSetInput!) {\n    updateProductSet(id: $id, update: $update) {\n      _id\n    }\n  }\n"]))),Kn=Object(_e.a)(B||(B=Object(he.a)(["\n  query productSet($id: ID!) {\n    productSet(id: $id) {\n      _id\n      nomenclature\n      article\n      products {\n        _id\n        nomenclature\n        article\n        count\n        price\n      }\n      category {\n        _id\n        name\n        subcategories {\n          _id\n          name\n        }\n      }\n      subcategoryId\n    }\n  }\n"]))),Nn=Ee.a(vn,Qe.a(ct.a,[it.a,Ee.a(ot.a("productIds"),xt.a("_id"),Fe.a([],"products"))]),Fe.a([],"productSet")),En=function(e){var t=e.id,a=e.closeModal,n=e.refetch,r=Object(rt.a)(Ln),c=Object(fe.a)(r,1)[0],i=Object(Se.a)(Kn,{variables:{id:t},fetchPolicy:"network-only"}),o=i.data;if(i.loading)return null;var l=Xe.a([],["productSet","products"],o),u=Nn(o),d=function(){var e=Object(nt.a)(at.a.mark((function e(r){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{id:t,update:Pn(r)}});case 2:a(),n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(Vn,{onFinish:d,initialValues:u,initialProducts:l})},Tn=a(290),Yn=a.n(Tn),zn=a(653),Rn=a(654),Qn=a(655),Un=we.a.div(D||(D=Object(he.a)(["\n  padding: 15px 0;\n  display: flex;\n  gap: 10px;\n"]))),Jn=Object(_e.a)(V||(V=Object(he.a)(["\n  mutation updateProducts($update: [ProductsInput]!) {\n    updateProducts(update: $update)\n  }\n"]))),Gn=Object(_e.a)(A||(A=Object(he.a)(["\n  mutation createProducts($input: [ProductsInput]!) {\n    createProducts(input: $input)\n  }\n"]))),Hn=function(e){var t=e.updateProductsItems,a=e.diffProducts,n=e.setNewPrice,r=e.closeModal,c=e.refetch,i=Object(rt.a)(Gn),o=Object(fe.a)(i,1)[0],l=Object(rt.a)(Jn),u=Object(fe.a)(l,2),d=u[0],s=u[1].loading,j=function(){var e=Object(nt.a)(at.a.mark((function e(){var a,i;return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({variables:{update:t}});case 2:return a=e.sent,e.next=5,c();case 5:i=Xe.a(0,["data","updateProducts"],a),alert("\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e ".concat(i," \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0456\u0432")),n([]),r();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(nt.a)(at.a.mark((function e(){var i,l,u,s;return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({variables:{input:a}});case 2:if(i=e.sent,un.a(t)){e.next=7;break}return e.next=6,d({variables:{update:t}});case 6:l=e.sent;case 7:return e.next=9,c();case 9:u=Xe.a(0,["data","updateProducts"],l),s=Xe.a(0,["data","createProducts"],i),alert("\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e ".concat(u," \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0456\u0432 \u0442\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e ").concat(s," ")),n([]),r();case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(Un,{children:[Object(ye.jsx)(Ke.a,{disabled:un.a(a),loading:s,onClick:b,children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043d\u043e\u0432\u0456 \u0442\u0430 \u043e\u043d\u043e\u0432\u0438\u0442\u0438"}),Object(ye.jsx)(Ke.a,{disabled:un.a(t),loading:s,onClick:j,children:"\u0422\u0456\u043b\u044c\u043a\u0438 \u043e\u043d\u043e\u0432\u0438\u0442\u0438 \u0456\u0441\u043d\u0443\u044e\u0447\u0456"})]}),Object(ye.jsx)("h3",{children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438 \u044f\u043a\u0438\u0445 \u043d\u0435\u043c\u0430\u0454 \u0443 \u0431\u0430\u0437\u0456!"}),Object(ye.jsx)(Fn,{products:a})]})},Wn=we.a.input(q||(q=Object(he.a)(["\n  opacity: 0;\n  width: 0;\n  height: 0;\n"]))),Xn=He.a(lt.a({nomenclature:Fe.a("","\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430"),article:Fe.a("","\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),count:Ee.a(parseInt,Fe.a(0,"\u0417\u0430\u043b\u0438\u0448\u043e\u043a")),price:Ee.a(parseFloat,Fe.a(0,"\u0417\u0430\u043a\u0443\u043f\u043a\u0430"))})),Zn=He.a(zn.a(["nomenclature","article","count","price"])),er=function(e){var t=e.oldProductPrice,a=e.closeModal,n=e.refetch,r=Object(le.useState)([]),c=Object(fe.a)(r,2),i=c[0],o=c[1],l=Object(le.useRef)(),u=Object(le.useMemo)((function(){return Zn(t)}),[t]),d=Object(le.useMemo)((function(){return function(e,t){return Ht.a(un.a,ht.a([]),Qe.a(Qn.a,[xt.a("article"),ht.a(xt.a("article",e))]))(t)}(u,i)}),[i,u]),s=Object(le.useMemo)((function(){return(e=d,We.a(Ee.a(Te.a(Ye.a,e),ze.a("article"))))(i);var e}),[i,d]),j=Object(le.useMemo)((function(){return(e=d,We.a(Ee.a(Rn.a,Te.a(Ye.a,e),ze.a("article"))))(i);var e}),[i,d]);return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Wn,{ref:l,type:"file",onChange:function(e){var t=e.target.files;if(t&&t[0]){var a=new FileReader,n=!!a.readAsBinaryString;a.onload=function(e){var t=e.target.result,a=Yn.a.read(t,{type:n?"binary":"array",bookVBA:!0}),r=a.SheetNames[0],c=a.Sheets[r],i=Yn.a.utils.sheet_to_json(c),l=Xn(i);o(l)},n?a.readAsBinaryString(t[0]):a.readAsArrayBuffer(t[0])}}}),Object(ye.jsx)(Ke.a,{onClick:function(){return l.current.click()},children:"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0444\u0430\u0439\u043b"}),Object(ye.jsx)(Hn,{updateProductsItems:j,diffProducts:s,setNewPrice:o,closeModal:a,refetch:n})]})},tr=Object(_e.a)(L||(L=Object(he.a)(["\n  mutation deleteProduct($priceId: ID!) {\n    deleteProduct(id: $priceId)\n  }\n"]))),ar=Object(_e.a)(K||(K=Object(he.a)(["\n  mutation deleteProductSet($priceId: ID!) {\n    deleteProductSet(id: $priceId)\n  }\n"]))),nr=function(e){var t=e.id,a=e.nomenclature,n=e.refetch,r=e.type===wt?tr:ar,c=Object(rt.a)(r,{variables:{priceId:t}}),i=Object(fe.a)(c,1)[0],o=Pa(a,i,n);return Object(ye.jsx)(fa,{onClick:o})},rr=a(247),cr=a.n(rr),ir=cr.a.ExcelFile,or=cr.a.ExcelFile.ExcelSheet,lr=cr.a.ExcelFile.ExcelColumn,ur=function(e){var t=e.price;return Object(ye.jsx)(ir,{element:Object(ye.jsx)(Ke.a,{type:"primary",children:"Excel Export"}),children:Object(ye.jsxs)(or,{data:t,name:"Price",children:[Object(ye.jsx)(lr,{label:"\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430",value:"nomenclature"}),Object(ye.jsx)(lr,{label:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",value:"article"}),Object(ye.jsx)(lr,{label:"\u0417\u0430\u043b\u0438\u0448\u043e\u043a",value:"count"}),Object(ye.jsx)(lr,{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0430",value:"price"}),Object(ye.jsx)(lr,{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0430 \u0434\u0440\u043e\u043f",value:"dropPrice"}),Object(ye.jsx)(lr,{label:"\u041f\u0440\u043e\u0434\u0430\u0436",value:"sellingPrice"}),Object(ye.jsx)(lr,{label:"\u041e\u043f\u0442",value:"wholesalePrice"}),Object(ye.jsx)(lr,{label:"\u0422\u0438\u043f",value:"type"}),Object(ye.jsx)(lr,{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",value:"category"}),Object(ye.jsx)(lr,{label:"\u041f\u0456\u0434 \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",value:"subcategory"})]})})},dr=function(e){var t=e.price;return Object(ye.jsx)(ir,{element:Object(ye.jsx)(Ke.a,{type:"primary",children:"Excel Export"}),children:Object(ye.jsxs)(or,{data:t,name:"Price",children:[Object(ye.jsx)(lr,{label:"\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430",value:"nomenclature"}),Object(ye.jsx)(lr,{label:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",value:"article"}),Object(ye.jsx)(lr,{label:"\u0417\u0430\u043b\u0438\u0448\u043e\u043a",value:"count"}),Object(ye.jsx)(lr,{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0430 \u0434\u0440\u043e\u043f",value:"dropPrice"}),Object(ye.jsx)(lr,{label:"\u041f\u0440\u043e\u0434\u0430\u0436",value:"sellingPrice"}),Object(ye.jsx)(lr,{label:"\u041e\u043f\u0442",value:"wholesalePrice"}),Object(ye.jsx)(lr,{label:"\u0422\u0438\u043f",value:"type"}),Object(ye.jsx)(lr,{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",value:"category"}),Object(ye.jsx)(lr,{label:"\u041f\u0456\u0434 \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",value:"subcategory"})]})})},sr=a(245),jr=function(e){var t=e.setSelectedKeys,a=e.selectedKeys,n=e.confirm,r=e.clearFilters;return Object(ye.jsxs)("div",{style:{padding:8},children:[Object(ye.jsx)(Nt.a,{placeholder:"\u041f\u043e\u0448\u0443\u043a",value:a[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},onPressEnter:function(){return n()},style:{marginBottom:8,display:"block"}}),Object(ye.jsxs)(Tt.b,{children:[Object(ye.jsx)(Ke.a,{type:"primary",onClick:function(){return n()},icon:Object(ye.jsx)(sr.a,{}),size:"small",style:{width:90},children:"\u0417\u043d\u0430\u0439\u0442\u0438"}),Object(ye.jsx)(Ke.a,{onClick:function(){return r()},size:"small",style:{width:90},children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u0438"})]})]})},br=function(e){return{filterDropdown:function(e){return Object(ye.jsx)(jr,Object(dt.a)({},e))},filterIcon:function(e){return Object(ye.jsx)(sr.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e]?a[e].toString().toLowerCase().includes(t.toLowerCase()):""}}},Or=Object(_e.a)(N||(N=Object(he.a)(["\n  fragment categoryFragment on Category {\n    _id\n    name\n    markup\n    subcategories {\n      _id\n      name\n      markup\n    }\n  }\n"]))),pr=Object(_e.a)(E||(E=Object(he.a)(["\n  fragment productFragment on Product {\n    _id\n    nomenclature\n    article\n    count\n    price\n    subcategoryId\n    markup\n    sellingPrice\n    category {\n      ...categoryFragment\n    }\n  }\n  ","\n"])),Or),hr=Object(_e.a)(T||(T=Object(he.a)(["\n  query {\n    products {\n      ...productFragment\n    }\n    productSets {\n      _id\n      nomenclature\n      article\n      subcategoryId\n      category {\n        ...categoryFragment\n      }\n      products {\n        ...productFragment\n        category {\n          ...categoryFragment\n        }\n      }\n    }\n  }\n  ",",\n  ","\n"])),pr,Or),xr=Object(_e.a)(Y||(Y=Object(he.a)(["\n  query {\n    categories {\n      name\n      subcategories {\n        name\n      }\n    }\n  }\n"]))),fr=function(){var e=Object(Se.a)(hr,{fetchPolicy:"network-only"}),t=e.data,a=e.loading,n=e.refetch,r=Object(Se.a)(xr,{fetchPolicy:"network-only"}).data,c=At(r),i=c.categories,o=c.subCategories,l=Bt(t),u=Vt(t),d=Ie(),s=d.showModal,j=d.handleCancel,b=[Object(dt.a)({title:"\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430",dataIndex:"nomenclature"},br("nomenclature")),Object(dt.a)(Object(dt.a)({title:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",dataIndex:"article"},br("article")),{},{sorter:function(e,t){return e.article.localeCompare(t.article)}}),{title:"\u0417\u0430\u043b\u0438\u0448\u043e\u043a",dataIndex:"count",sorter:function(e,t){return t.count-e.count}},{title:"\u0417\u0430\u043a\u0443\u043f\u043a\u0430 \u043c\u043e\u044f",dataIndex:"price",sorter:function(e,t){return t.price-e.price}},{title:"\u0417\u0430\u043a\u0443\u043f\u043a\u0430",dataIndex:"dropPrice",sorter:function(e,t){return t.dropPrice-e.dropPrice}},{title:"\u041f\u0440\u043e\u0434\u0430\u0436",dataIndex:"sellingPrice",sorter:function(e,t){return t.sellingPrice-e.sellingPrice}},{title:"\u041e\u043f\u0442",dataIndex:"wholesalePrice",sorter:function(e,t){return t.wholesalePrice-e.wholesalePrice}},{title:"\u0422\u0438\u043f",dataIndex:"type",filters:[{text:wt,value:wt},{text:kt,value:kt}],onFilter:function(e,t){return t.type===e}},{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",dataIndex:"categoryName",filters:qt(i),onFilter:function(e,t){return t.categoryName===e}},{title:"\u041f\u0456\u0434 \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",dataIndex:"subcategoryName",filters:qt(o),onFilter:function(e,t){return t.subcategoryName===e}},{dataIndex:"_id",render:function(e,t){return Object(ye.jsxs)(ha,{children:[Object(ye.jsx)(ma,{onClick:function(){return function(e,t){var a=t.nomenclature,r=t.type;s(r===wt?{title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442 ".concat(a),content:function(){return Object(ye.jsx)(Sn,{closeModal:j,refetch:n,id:e})}}:{title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043d\u0430\u0431\u0456\u0440 ".concat(a),width:800,content:function(){return Object(ye.jsx)(En,{closeModal:j,refetch:n,id:e})}})}(e,t)}}),Object(ye.jsx)(nr,{refetch:n,id:e,nomenclature:t.nomenclature,type:t.type})]})}}];return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(ha,{children:[Object(ye.jsx)(Ke.a,{type:"primary",onClick:function(){return s({title:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0438\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0442",content:function(){return Object(ye.jsx)(kn,{closeModal:j,refetch:n})}})},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442"}),Object(ye.jsx)(Ke.a,{type:"primary",onClick:function(){return s({title:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0438\u0439 \u043d\u0430\u0431\u0456\u0440",width:800,content:function(){return Object(ye.jsx)(qn,{closeModal:j,refetch:n})}})},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u0430\u0431\u0456\u0440"}),Object(ye.jsx)(ur,{price:[].concat(Object(Gt.a)(l),Object(Gt.a)(u))}),Object(ye.jsx)(Ke.a,{type:"primary",onClick:function(){s({title:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438",width:800,content:function(){return Object(ye.jsx)(er,{oldProductPrice:l,closeModal:j,refetch:n})}})},children:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438"}),Object(ye.jsxs)("p",{children:["\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0456\u0432: ",l.length," \u0448\u0442. "]}),Object(ye.jsxs)("p",{children:["\u041d\u0430\u0431\u043e\u0440\u0456\u0432: ",u.length," \u0448\u0442. "]}),Object(ye.jsx)(ga,{onClick:function(){return s({title:" \u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u044f",content:function(){return Object(ye.jsx)(jn,{closeModal:j})}})}})]}),Object(ye.jsx)(Ne.a,{columns:b,dataSource:[].concat(Object(Gt.a)(l),Object(Gt.a)(u)),loading:a,rowKey:"_id",pagination:{showTotal:function(e){return"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c ".concat(e," \u0448\u0442.")}},size:"small"})]})},mr=a(685),yr=a(678),gr=function(e){var t=e.onFinish,a=e.initialValues,n=void 0===a?{}:a;return Object(ye.jsxs)(Lt.a,{name:"categoryForm",onFinish:t,layout:"vertical",initialValues:n,children:[Object(ye.jsx)(Lt.a.Item,{label:"\u041d\u0430\u0437\u0432\u0430",name:"name",rules:[Rt],children:Object(ye.jsx)(Nt.a,{})}),Object(ye.jsx)(Ut,{}),Object(ye.jsx)(Lt.a.List,{name:"subcategories",children:function(e,t){var a=t.add,n=t.remove;return Object(ye.jsxs)(ye.Fragment,{children:[e.map((function(e){return Object(ye.jsxs)(Tt.b,{align:"baseline",children:[Object(ye.jsx)(Lt.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.area!==t.area||e.sights!==t.sights},children:function(){return Object(ye.jsx)(Lt.a.Item,Object(dt.a)(Object(dt.a)({},e),{},{label:"\u041d\u0430\u0437\u0432\u0430",name:[e.name,"name"],fieldKey:[e.fieldKey,"sight"],rules:[Rt],children:Object(ye.jsx)(Nt.a,{})}))}}),Object(ye.jsx)(Lt.a.Item,Object(dt.a)(Object(dt.a)({},e),{},{label:"\u041d\u0430\u0446\u0456\u043d\u043a\u0430",name:[e.name,"markup"],fieldKey:[e.fieldKey,"markup"],children:Object(ye.jsx)(Yt.a,{})})),Object(ye.jsx)(mr.a,{onClick:function(){return n(e.name)}})]},e.key)})),Object(ye.jsx)(Lt.a.Item,{children:Object(ye.jsx)(Ke.a,{type:"dashed",onClick:function(){return a()},block:!0,icon:Object(ye.jsx)(yr.a,{}),children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043f\u0456\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e"})})]})}}),Object(ye.jsx)(Qt,{})]})},vr=a(672),Ir=Ee.a(vt.a,ze.a("subcategories")),Pr=function(e){return Ht.a(Ir,ut.a("subcategories"),Qe.a(ct.a,[it.a,Ee.a(ot.a("subcategories"),He.a(e),ze.a("subcategories"))]))},wr=lt.a({_id:function(){return Object(vr.a)()},name:ze.a("name"),markup:ze.a("markup")}),kr=Ht.a(Ee.a(vt.a,ze.a("_id")),wr,it.a),Cr=Pr(wr),_r=Pr(kr),Sr=Ee.a(on.a(Ir,Qe.a(ct.a,[it.a,Ee.a(ot.a("subcategories"),He.a(ut.a("__typename")),ze.a("subcategories"))])),ut.a("__typename"),Fe.a({},"category")),Fr=Object(_e.a)(z||(z=Object(he.a)(["\n  mutation updateCategory($updateCategoryId: ID!, $update: CategoryInput!) {\n    updateCategory(id: $updateCategoryId, update: $update) {\n      _id\n    }\n  }\n"]))),$r=Object(_e.a)(R||(R=Object(he.a)(["\n  query category($id: ID!) {\n    category(id: $id) {\n      ...categoryFragment\n    }\n  }\n  ","\n"])),Or),Mr=function(e){var t=e.id,a=e.closeModal,n=e.refetch,r=Object(Se.a)($r,{variables:{id:t},fetchPolicy:"network-only"}),c=r.data,i=r.loading,o=Sr(c),l=Object(rt.a)(Fr),u=Object(fe.a)(l,1)[0],d=function(){var e=Object(nt.a)(at.a.mark((function e(r){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({variables:{updateCategoryId:t,update:_r(r)}});case 3:a(),n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return i?null:Object(ye.jsx)(gr,{onFinish:d,initialValues:o})},Br=Object(_e.a)(Q||(Q=Object(he.a)(["\n  mutation createCategory($input: CategoryInput!) {\n    createCategory(input: $input) {\n      _id\n    }\n  }\n"]))),Dr=function(e){var t=e.closeModal,a=e.refetch,n=Object(rt.a)(Br),r=Object(fe.a)(n,1)[0],c=function(){var e=Object(nt.a)(at.a.mark((function e(n){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r({variables:{input:Cr(n)}});case 3:t(),a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(gr,{onFinish:c})},Vr=Object(_e.a)(U||(U=Object(he.a)(["\n  mutation deleteCategory($categoryId: ID!) {\n    deleteCategory(id: $categoryId)\n  }\n"]))),Ar=function(e){var t=e.id,a=e.categoryName,n=e.refetch,r=Object(rt.a)(Vr,{variables:{categoryId:t}}),c=Object(fe.a)(r,1)[0],i=Pa(a,c,n);return Object(ye.jsx)(fa,{onClick:i})},qr=Object(_e.a)(J||(J=Object(he.a)(["\n  query {\n    categories {\n      ...categoryFragment\n    }\n  }\n  ","\n"])),Or),Lr=pt.a("__typename","Subcategory"),Kr=Ee.a(He.a(on.a(Ee.a(ln.a(vt.a,un.a),ze.a("subcategories")),Qe.a(ct.a,[ut.a("subcategories"),Ee.a(ot.a("children"),ze.a("subcategories"))]))),Fe.a([],"categories")),Nr=function(){var e=Object(Se.a)(qr,{fetchPolicy:"network-only"}),t=e.data,a=e.loading,n=e.refetch,r=Ie(),c=r.showModal,i=r.handleCancel,o=Kr(t),l=[{title:"\u041d\u0430\u0437\u0432\u0430",dataIndex:"name"},{title:"\u041d\u0430\u0446\u0456\u043d\u043a\u0430",dataIndex:"markup"},{dataIndex:"_id",render:function(e,t){return Lr(t)?null:Object(ye.jsxs)(ha,{children:[Object(ye.jsx)(ma,{onClick:function(){return function(e,t){return c({title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e ".concat(t),content:function(){return Object(ye.jsx)(Mr,{closeModal:i,refetch:n,id:e})}})}(e,t.name)}}),Object(ye.jsx)(Ar,{refetch:n,id:e,categoryName:t.name})]})}}];return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(ha,{children:Object(ye.jsx)(Ke.a,{type:"primary",onClick:function(){return c({title:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e",content:function(){return Object(ye.jsx)(Dr,{closeModal:i,refetch:n})}})},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e"})}),Object(ye.jsx)(Ne.a,{columns:l,dataSource:o,loading:a,rowKey:"_id",pagination:!1,size:"small"})]})},Er=Object(_e.a)(G||(G=Object(he.a)(["\n  mutation LOGIN_MUTATION($input: LoginInput!) {\n    login(input: $input) {\n      token\n    }\n  }\n"]))),Tr=function(){var e=Object(rt.a)(Er),t=Object(fe.a)(e,1)[0],a=Object(Pe.h)(),n=function(){var e=Object(nt.a)(at.a.mark((function e(n){var r,c;return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({variables:{input:n}});case 3:r=e.sent,c=Xe.a("",["data","login","token"],r),localStorage.setItem("token",c),setTimeout((function(){return a(fc.home)}),500),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsxs)(Lt.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:n,autoComplete:"off",children:[Object(ye.jsx)(Lt.a.Item,{label:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447",name:"username",rules:[{required:!0,message:"\u0406\u043c'\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435!"}],children:Object(ye.jsx)(Nt.a,{})}),Object(ye.jsx)(Lt.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0438\u0439!"}],children:Object(ye.jsx)(Nt.a.Password,{})}),Object(ye.jsx)(Lt.a.Item,{wrapperCol:{offset:8,span:16},children:Object(ye.jsx)(Ke.a,{type:"primary",htmlType:"submit",children:"\u0423\u0432\u0456\u0439\u0442\u0438"})})]})},Yr=we.a.div(H||(H=Object(he.a)(["\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),zr=Re.a((function(e,t){return We.a(Ee.a(Te.a(Ye.a,e),ze.a("_id")),t)})),Rr=Ee.a(lt.a({products:it.a,totalPrice:Ee.a(St,Ge.a,He.a(Fe.a(0,"totalPrice"))),totalSellPrice:Ee.a(St,Ge.a,He.a(Fe.a(0,"totalSellingPrice")))}),He.a(Qe.a(ct.a,[it.a,lt.a({totalPrice:Qe.a(jt.a,[ze.a("price"),ze.a("count")]),totalSellingPrice:Qe.a(jt.a,[ze.a("sellingPrice"),ze.a("count")])})]))),Qr=Ee.a(Bt,ot.a("products"),He.a(Qe.a(ct.a,[it.a,lt.a({count:Fe.a(1,"count")})])),Fe.a([],"productsSearch")),Ur=Ee.a(He.a(Qe.a(ct.a,[it.a,lt.a({count:Ht.a(pt.a("count","-"),ht.a(1),ze.a("count"))})])),Vt,ot.a("productSets"),Fe.a([],"productSetSearch")),Jr=function(e){var t=e.form,a=e.initialProducts,n=void 0===a?[]:a,r="ADMIN"===De().user.role,c=Object(le.useState)(n),i=Object(fe.a)(c,2),o=i[0],l=i[1],u=Object(le.useState)(""),d=Object(fe.a)(u,2),s=d[0],j=d[1],b=Object(Se.a)(Xt,{variables:{search:s},skip:s.length<3}).data,O=function(){var e=t.getFieldValue("products"),a=Rr(e);t.setFieldsValue(a),l(a.products)},p=yt.a([].concat(Object(Gt.a)(Fe.a([],"productsSearch",b)),Object(Gt.a)(Fe.a([],"productSetSearch",b)),Object(Gt.a)(n)));return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Lt.a.Item,{label:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438(\u0410\u0440\u0442\u0438\u043a\u0443\u043b)",name:"productIds",children:Object(ye.jsx)(Et.a,{onChange:function(e){var a=[];if(e.length>o.length){var n=Qr(b),r=Ur(b);console.log({setProductsItems:r,data:b});var c=Ot.a(pt.a("_id",Wt.a(e)),[].concat(Object(Gt.a)(n),Object(Gt.a)(r)));a=[].concat(Object(Gt.a)(o),[c])}else a=zr(e,o);var i=Rr(a);t.setFieldsValue(i),l(i.products)},onSearch:function(e){j(e)},mode:"multiple",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:p.map((function(e){return Object(ye.jsx)(Et.a.Option,{value:e._id,children:e.article},e._id)}))})}),Object(ye.jsx)(Lt.a.List,{name:"products",children:function(e,t){t.add,t.remove;return Object(ye.jsx)(ye.Fragment,{children:e.map((function(e){return Object(ye.jsxs)(Tt.b,{align:"baseline",children:[Object(ye.jsx)(Lt.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.area!==t.area||e.sights!==t.sights},children:function(){return Object(ye.jsx)(Lt.a.Item,Object(dt.a)(Object(dt.a)({},e),{},{label:"\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430",name:[e.name,"nomenclature"],fieldKey:[e.fieldKey,"nomenclature"],rules:[Rt],children:Object(ye.jsx)(Nt.a,{disabled:!0})}))}}),Object(ye.jsx)(Lt.a.Item,Object(dt.a)(Object(dt.a)({},e),{},{label:"\u0426\u0456\u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0436",name:[e.name,"sellingPrice"],fieldKey:[e.fieldKey,"sellingPrice"],rules:[Rt],onChange:O,children:Object(ye.jsx)(Yt.a,{disabled:!r})})),Object(ye.jsx)(Lt.a.Item,Object(dt.a)(Object(dt.a)({},e),{},{label:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c",name:[e.name,"count"],fieldKey:[e.fieldKey,"count"],rules:[Rt],onChange:O,children:Object(ye.jsx)(Yt.a,{})}))]},e.key)}))})}}),Object(ye.jsx)("br",{})]})},Gr=Object(dt.a)(Object(dt.a)({},ra),{},{RETURNED:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043e"}),Hr=function(e){var t=e.onFinish,a=e.initialValues,n=e.initialProducts,r=void 0===n?[]:n,c=Lt.a.useForm(),i=Object(fe.a)(c,1)[0],o="ADMIN"===De().user.role;return Object(ye.jsxs)(Lt.a,{form:i,name:"orderForm",onFinish:t,layout:"vertical",initialValues:a,children:[Object(ye.jsx)(Lt.a.Item,{name:"date",label:"\u0414\u0430\u0442\u0430",rules:[Rt],children:Object(ye.jsx)(Kt.a,{})}),Object(ye.jsx)(Lt.a.Item,{label:"\u0422\u0422\u041d",name:"ttn",children:Object(ye.jsx)(Nt.a,{})}),Object(ye.jsx)(Lt.a.Item,{label:"\u0421\u0442\u0430\u0442\u0443\u0441",name:"status",initialValue:Gr.PAID_BEFORE,children:Object(ye.jsx)(Et.a,{children:zt.a(Gr).map((function(e){return Object(ye.jsx)(Et.a.Option,{value:e,children:e},e)}))})}),Object(ye.jsx)(Lt.a.Item,{label:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",name:"buyerInfo",children:Object(ye.jsx)(Nt.a,{})}),Object(ye.jsx)(Jr,{form:i,initialProducts:r}),Object(ye.jsx)(Lt.a.Item,{name:"payed",label:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",children:Object(ye.jsx)(Yt.a,{min:0})}),Object(ye.jsxs)(Tt.b,{children:[Object(ye.jsx)(Lt.a.Item,{name:"totalPrice",label:"\u0421\u0443\u043c\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0430 \u043c\u043e\u044f",rules:[Rt],initialValue:0,children:Object(ye.jsx)(Yt.a,{min:0,disabled:!o})}),Object(ye.jsx)(Lt.a.Item,{name:"totalSellPrice",label:"\u0421\u0443\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436",rules:[Rt],initialValue:0,children:Object(ye.jsx)(Yt.a,{min:0,disabled:!o})})]}),Object(ye.jsx)(Qt,{})]})},Wr=Object(_e.a)(W||(W=Object(he.a)(["\n  mutation createOwnOrder($input: OwnOrderInput!) {\n    createOwnOrder(input: $input) {\n      _id\n    }\n  }\n"]))),Xr=Ee.a(Qe.a(ct.a,[it.a,Ee.a(ot.a("products"),He.a(lt.a({_id:ze.a("_id"),article:ze.a("article"),count:ze.a("count"),price:Ee.a(St,ze.a("price")),sellingPrice:Ee.a(St,ze.a("sellingPrice")),nomenclature:ze.a("nomenclature")})),Fe.a([],"products"))]),ut.a("productIds")),Zr=function(e){var t=e.closeModal,a=e.refetch,n=Object(rt.a)(Wr),r=Object(fe.a)(n,1)[0],c=function(){var e=Object(nt.a)(at.a.mark((function e(n){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r({variables:{input:Xr(n)}});case 3:t(),a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(Hr,{onFinish:c})},ec=Object(_e.a)(X||(X=Object(he.a)(["\n  mutation updateOwnOrder($id: ID!, $update: OwnOrderInput!) {\n    updateOwnOrder(id: $id, update: $update) {\n      _id\n    }\n  }\n"]))),tc=Ee.a(He.a(ze.a("_id")),Fe.a([],"products")),ac=function(e){var t=e.closeModal,a=e.refetch,n=e.order,r=Object(rt.a)(ec),c=Object(fe.a)(r,1)[0],i=tc(n),o=Object(dt.a)(Object(dt.a)({},n),{},{productIds:i,date:pe()(n.date)}),l=Fe.a([],"products",n),u=function(){var e=Object(nt.a)(at.a.mark((function e(r){return at.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c({variables:{id:n._id,update:Object(dt.a)({},Xr(r))}}),t(),a()}catch(i){alert(i)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(Hr,{onFinish:u,initialValues:o,initialProducts:l})},nc=Object(_e.a)(Z||(Z=Object(he.a)(["\n  mutation removeOwnOrder($id: ID!) {\n    removeOwnOrder(id: $id)\n  }\n"]))),rc=function(e){var t=e.id,a=e.refetch,n=Object(rt.a)(nc,{variables:{id:t}}),r=Object(fe.a)(n,1)[0],c=Pa("\u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",r,a);return Object(ye.jsx)(fa,{onClick:c})},cc=we.a.div(ee||(ee=Object(he.a)(["\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  margin-left: 10px;\n"]))),ic=Object(_e.a)(te||(te=Object(he.a)(["\n  query ownOrders($date: String!) {\n    ownOrders(date: $date) {\n      _id\n      date\n      totalPrice\n      totalSellPrice\n      ttn\n      buyerInfo\n      status\n      payed\n      products {\n        _id\n        article\n        count\n        price\n        sellingPrice\n        nomenclature\n      }\n    }\n  }\n"]))),oc=Ee.a(St,Qe.a(Ue.a,[Ee.a(Ge.a,He.a(Fe.a(0,"totalSellPrice"))),Ee.a(Ge.a,He.a(Fe.a(0,"totalPrice")))]),We.a(_a)),lc=Ee.a(St,Ge.a,He.a(Fe.a(0,"payed"))),uc=Ee.a(St,Qe.a(Ue.a,[oc,lc])),dc=we.a.div(ae||(ae=Object(he.a)(["\n  display: flex;\n  align-items: center;\n  gap: 20px;\n"]))),sc=we.a.div(ne||(ne=Object(he.a)(["\n  padding: 10px;\n"]))),jc=Et.a.Option,bc=Et.a.Option,Oc=Object(_e.a)(re||(re=Object(he.a)(["\n  query batchOrdersQuery($query: BatchOrdersQuery!) {\n    batchOrders(query: $query) {\n      _id\n      dropBuyer {\n        _id\n        name\n      }\n      orders {\n        id\n        date\n        totalPrice\n        totalSellPrice\n        totalDropPrice\n        payed\n        ttn\n        buyerInfo\n        status\n        products {\n          _id\n          article\n          count\n          price\n          dropPrice\n          sellingPrice\n          nomenclature\n        }\n      }\n    }\n  }\n"]))),pc=Object(_e.a)(ce||(ce=Object(he.a)(["\n  query {\n    batchOrdersPeriods {\n      periods\n    }\n  }\n"]))),hc=we.a.div(ie||(ie=Object(he.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  font-weight: 700;\n  font-size: 20px;\n"]))),xc=Ee.a(Ze.a,et.a(ze.a("date")),It.a,He.a((function(e){return Ee.a(He.a(Qe.a(ct.a,[it.a,lt.a({dropBuyerName:ht.a(e.dropBuyer.name)})])),Fe.a([],"orders"))(e)})),Fe.a([],"batchOrders")),fc={home:"/",category:"/category",login:"/login",price:"/price",dropBuyer:"/drop-buyer",batchOrders:"/batch-orders",batchOrdersBuyer:"/batch-buyer/:dropBuyerId",batchOrder:"/batch-order/:batchOrderId",public:"/public",publicBatchOrder:"batch-order/:batchOrderId",publicBatchOrdersBuyer:"batch-buyer/:dropBuyerId",statistic:"/statistic",ownOrders:"/own-orders"},mc=[{Layout:function(){var e=Object(Se.a)(Le),t=e.data,a=e.loading,n=Object(Pe.h)(),r=De().userLogin;if(a)return null;var c=Fe.a(null,"me",t);return c?r(c):n(fc.login),Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(qe,{}),Object(ye.jsx)(Pe.a,{})]})},rootPath:fc.home,routes:[{path:fc.home,Component:function(){return Object(ye.jsx)(fr,{})}},{path:fc.category,Component:function(){return Object(ye.jsx)(Nr,{})}},{path:fc.dropBuyer,Component:function(){return Object(ye.jsx)("div",{children:Object(ye.jsx)(Ra,{})})}},{path:fc.batchOrders,Component:function(){return Object(ye.jsx)(rn,{query:cn})}},{path:fc.batchOrdersBuyer,Component:function(){var e={isActive:!0,dropBuyerId:Object(Pe.i)().dropBuyerId};return Object(ye.jsx)(rn,{query:e})}},{path:fc.batchOrder,Component:function(){return Object(ye.jsx)(Ba,{})}},{path:fc.statistic,Component:function(){var e=Object(le.useState)(null),t=Object(fe.a)(e,2),a=t[0],n=t[1],r=Ie().showModal,c=Object(Se.a)(pc,{fetchPolicy:"network-only"}).data,i=Object(Se.a)(Oc,{variables:{query:a},skip:!a,fetchPolicy:"network-only"}),o=i.data,l=i.loading,u=Xe.a([],["batchOrdersPeriods","periods"],c),d=xc(o),s=Fa(d),j=[{title:"\u0414\u0430\u0442\u0430",dataIndex:"date",render:function(e){return pe()(e).format("YYYY-MM-DD")}},{title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",dataIndex:"buyerInfo"},{title:"\u0422\u0422\u041d",dataIndex:"ttn"},{title:"\u0414\u0440\u043e\u043f\u0448\u0438\u043f\u043f\u0435\u0440",dataIndex:"dropBuyerName"},{title:"\u0421\u0443\u043c\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0430 \u043c\u043e\u044f",dataIndex:"totalPrice"},{title:"\u0421\u0443\u043c\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0430",dataIndex:"totalDropPrice"},{title:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",dataIndex:"payed"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status"},{dataIndex:"_id",render:function(e,t){return Object(ye.jsx)(ya,{onClick:function(){return e=Fe.a([],"products",t),r({title:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438",width:1e3,content:function(){return Object(ye.jsx)(Ca,{products:e,type:"drop"})}});var e}})}}];return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)($a,{children:[Object(ye.jsx)(Et.a,{style:{width:120,margin:"10px"},onChange:function(e){n({name:e})},children:u.map((function(e){return Object(ye.jsx)(bc,{value:e,children:e},e)}))}),Object(ye.jsx)(hc,{children:Object(ye.jsxs)(ye.Fragment,{children:["\u0414\u043e\u0445\u0456\u0434: ",s," \u0433\u0440\u043d"]})})]}),Object(ye.jsx)(Ne.a,{columns:j,dataSource:d,loading:l,rowKey:"id",pagination:!1,size:"small"})]})}},{path:fc.ownOrders,Component:function(){var e=(new Date).toISOString().slice(0,7),t=Object(le.useState)(e),a=Object(fe.a)(t,2),n=a[0],r=a[1],c=Ie(),i=c.showModal,o=c.handleCancel,l=Object(Se.a)(ic,{variables:{date:n},skip:!n,fetchPolicy:"network-only"}),u=l.data,d=l.loading,s=l.refetch,j=Ee.a(Xe.a([],["ownOrders"]))(u),b=uc(j),O=[{title:"\u0414\u0430\u0442\u0430",dataIndex:"date",render:function(e){return pe()(e).format("YYYY-MM-DD")}},{title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",dataIndex:"buyerInfo"},{title:"\u0422\u0422\u041d",dataIndex:"ttn"},{title:"\u0421\u0443\u043c\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0430 \u043c\u043e\u044f",dataIndex:"totalPrice"},{title:"\u0421\u0443\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436",dataIndex:"totalSellPrice"},{title:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",dataIndex:"payed"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status"},{dataIndex:"_id",render:function(e,t){return Object(ye.jsxs)(ha,{children:[Object(ye.jsx)(ya,{onClick:function(){return e=Fe.a([],"products",t),i({title:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438",width:1e3,content:function(){return Object(ye.jsx)(Ca,{products:e,type:"own"})}});var e}}),Object(ye.jsx)(ma,{onClick:function(){return function(e){return i({title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",content:function(){return Object(ye.jsx)(ac,{closeModal:o,refetch:s,order:e})}})}(t)}}),Object(ye.jsx)(rc,{id:t._id,refetch:s})]})}}];return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(cc,{children:[Object(ye.jsx)(Kt.a,{onChange:function(e,t){r(t)},picker:"month",defaultValue:pe()(e,"YYYY/MM")}),Object(ye.jsx)(Ke.a,{style:{margin:"10px"},type:"primary",onClick:function(){return i({title:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0434\u043e ",content:function(){return Object(ye.jsx)(Zr,{closeModal:o,refetch:s})}})},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(ye.jsxs)("p",{children:["\u0414\u043e\u0445\u0456\u0434: ",b," \u0433\u0440\u043d"]})]}),Object(ye.jsx)(Ne.a,{columns:O,dataSource:j,loading:d,rowKey:"_id",pagination:!1,size:"small",scroll:{y:800}})]})}}]},{Layout:function(){return Object(ye.jsx)(ke,{children:Object(ye.jsx)(Pe.a,{})})},rootPath:fc.login,routes:[{index:!0,path:fc.login,Component:function(){return Object(ye.jsx)(Yr,{children:Object(ye.jsx)(Tr,{})})}}]},{Layout:Ce,rootPath:fc.price,routes:[{index:!0,path:fc.price,Component:function(){var e=Object(Se.a)(hr,{fetchPolicy:"network-only"}),t=e.data,a=e.loading,n=Object(Se.a)(xr,{fetchPolicy:"network-only"}).data,r=At(n),c=r.categories,i=r.subCategories,o=Bt(t),l=Vt(t),u=[Object(dt.a)({title:"\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430",dataIndex:"nomenclature"},br("nomenclature")),Object(dt.a)({title:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",dataIndex:"article"},br("article")),{title:"\u0417\u0430\u043b\u0438\u0448\u043e\u043a",dataIndex:"count",sorter:function(e,t){return t.count-e.count}},{title:"\u0417\u0430\u043a\u0443\u043f\u043a\u0430",dataIndex:"dropPrice",sorter:function(e,t){return t.dropPrice-e.dropPrice}},{title:"\u041f\u0440\u043e\u0434\u0430\u0436",dataIndex:"sellingPrice",sorter:function(e,t){return t.sellingPrice-e.sellingPrice}},{title:"\u041e\u043f\u0442",dataIndex:"wholesalePrice",sorter:function(e,t){return t.wholesalePrice-e.wholesalePrice}},{title:"\u0422\u0438\u043f",dataIndex:"type",filters:[{text:wt,value:wt},{text:kt,value:kt}],onFilter:function(e,t){return t.type===e}},{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",dataIndex:"categoryName",filters:qt(c),onFilter:function(e,t){return t.category===e}},{title:"\u041f\u0456\u0434 \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",dataIndex:"subcategoryName",filters:qt(i),onFilter:function(e,t){return t.subcategory===e}}];return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(ha,{children:[Object(ye.jsx)(dr,{price:[].concat(Object(Gt.a)(o),Object(Gt.a)(l))}),Object(ye.jsxs)("p",{children:["\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0456\u0432: ",o.length," \u0448\u0442. "]}),Object(ye.jsxs)("p",{children:["\u041d\u0430\u0431\u043e\u0440\u0456\u0432: ",l.length," \u0448\u0442. "]})]}),Object(ye.jsx)(Ne.a,{columns:u,dataSource:[].concat(Object(Gt.a)(o),Object(Gt.a)(l)),loading:a,rowKey:"_id",pagination:{showTotal:function(e){return"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c ".concat(e," \u0448\u0442.")}}})]})}}]},{Layout:Ce,rootPath:fc.public,routes:[{path:fc.publicBatchOrder,Component:function(){var e=Object(Pe.i)().batchOrderId,t=Ie().showModal,a=Object(Se.a)(Ma,{variables:{id:e},skip:!e,fetchPolicy:"network-only"}),n=a.data,r=a.loading,c=Xe.a("",["batchOrder","name"],n),i=Xe.a("",["batchOrder","dropBuyer","name"],n),o=Xe.a("",["batchOrder","movedTotal"],n),l=Ee.a(Ze.a,et.a(ze.a("date")),Xe.a([],["batchOrder","orders"]))(n),u=Sa(o)(l),d=[{title:"\u0414\u0430\u0442\u0430",dataIndex:"date",render:function(e){return pe()(e).format("YYYY-MM-DD")}},{title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",dataIndex:"buyerInfo"},{title:"\u0422\u0422\u041d",dataIndex:"ttn"},{title:"\u0421\u0443\u043c\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0430",dataIndex:"totalDropPrice"},{title:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",dataIndex:"payed"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status"},{dataIndex:"_id",render:function(e,a){return Object(ye.jsx)(ya,{onClick:function(){return e=Fe.a([],"products",a),t({title:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438",width:1e3,content:function(){return Object(ye.jsx)(Ca,{products:e,type:"public-drop"})}});var e}})}}];return Object(ye.jsxs)(sc,{children:[Object(ye.jsxs)(dc,{children:[Object(ye.jsxs)("p",{children:["\u041d\u0430\u0437\u0432\u0430: ",c]}),Object(ye.jsxs)("p",{children:["\u0414\u0440\u043e\u043f\u0448\u0438\u043f\u043f\u0435\u0440: ",i]}),Object(ye.jsxs)("p",{children:["\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0435\u043d\u043e: ",o," \u0433\u0440\u043d"]}),Object(ye.jsx)("h3",{children:Object(ye.jsxs)("b",{children:["\u0411\u0430\u043b\u0430\u043d\u0441: ",u," \u0433\u0440\u043d"]})})]}),Object(ye.jsx)(Ne.a,{columns:d,dataSource:l,loading:r,rowKey:"id",pagination:!1,size:"small"})]})}},{path:fc.publicBatchOrdersBuyer,Component:function(){var e={isActive:!0,dropBuyerId:Object(Pe.i)().dropBuyerId},t=Object(le.useState)(e),a=Object(fe.a)(t,2),n=a[0],r=a[1],c=Object(Se.a)(nn,{variables:{query:n},skip:!n,fetchPolicy:"network-only"}),i=c.data,o=c.loading,l=[{title:"\u041d\u0430\u0437\u0432\u0430",dataIndex:"name",render:function(e,t){var a=Object(Pe.e)("".concat(fc.public,"/").concat(fc.publicBatchOrder),{batchOrderId:t._id});return Object(ye.jsx)(je.b,{to:a,children:e})}},{title:"\u0414\u0440\u043e\u043f\u0448\u0438\u043f\u043f\u0435\u0440",dataIndex:"dropBuyer",render:function(e){return e.name}},{title:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439",dataIndex:"isActive",render:function(e){return e?"\u0422\u0430\u043a":"\u041d\u0456"}}];return Object(ye.jsxs)(sc,{children:[Object(ye.jsxs)(Et.a,{defaultValue:!0,style:{width:120,margin:"10px"},onChange:function(e){r(Object(dt.a)(Object(dt.a)({},n),{},{isActive:e}))},children:[Object(ye.jsx)(jc,{value:!0,children:"\u0410\u043a\u0442\u0438\u0432\u043d\u0456"}),Object(ye.jsx)(jc,{value:!1,children:"\u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u043d\u0456"})]}),Object(ye.jsx)(Ke.a,{href:"/price",type:"primary",target:"_blank",children:"\u041f\u0440\u0430\u0439\u0441"}),Object(ye.jsx)(Ne.a,{columns:l,dataSource:Ee.a(Ze.a,et.a(ze.a("name")),Fe.a([],"batchOrders"))(i),loading:o,rowKey:"_id",pagination:!1,size:"small"})]})}}]}],yc=function(){return Object(ye.jsx)(Pe.d,{children:mc.map((function(e){var t=e.routes,a=e.rootPath,n=e.Layout;return Object(ye.jsx)(Pe.b,{path:a,element:Object(ye.jsx)(n,{}),children:t.map((function(e){var t=e.path,a=e.index,n=e.Component;return Object(ye.jsx)(Pe.b,{index:a,path:t,element:Object(ye.jsx)(n,{})},t)}))},a)}))})},gc=Object(_e.a)(oe||(oe=Object(he.a)(["\n  query settings {\n    settings {\n      dropshippingMarkup\n    }\n  }\n"]))),vc=function(){var e=Object(Se.a)(gc,{fetchPolicy:"network-only"}),t=e.data;if(e.loading)return Object(ye.jsx)("p",{children:"Loading..."});var a=xe.a(["settings","dropshippingMarkup"],t);return a>0&&localStorage.setItem("setting",a),Object(ye.jsx)(Be,{children:Object(ye.jsx)(ve,{children:Object(ye.jsx)(yc,{})})})},Ic=a(392),Pc=a.n(Ic),wc=a(396),kc=a(662),Cc=a(665),_c=a(657),Sc=a(391),Fc=Object(wc.a)({uri:"http://13.40.19.218:3100/graphql"}),$c=Object(Sc.a)((function(e,t){var a=t.headers,n=localStorage.getItem("token");return{headers:Object(dt.a)(Object(dt.a)({},a),{},{authorization:n||""})}})),Mc=new kc.a({link:$c.concat(Fc),cache:new Cc.a}),Bc=function(e){var t=e.children;return Object(ye.jsx)(_c.a,{client:Mc,children:t})};pe.a.locale("ru"),se.a.render(Object(ye.jsx)(je.a,{children:Object(ye.jsx)(be.a,{locale:Pc.a,children:Object(ye.jsx)(Bc,{children:Object(ye.jsx)(vc,{})})})}),document.getElementById("root"))}},[[620,1,2]]]);
//# sourceMappingURL=main.cf9a4af4.chunk.js.map